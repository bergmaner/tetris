(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{13:function(e,n,t){e.exports=t(21)},18:function(e,n,t){},21:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(9),o=t.n(c),i=(t(18),t(1)),u=t(2),l=t(3),f={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"90, 230, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"40, 100, 220"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"220, 170, 40"},O:{shape:[["O","O"],["O","O"]],color:"220, 220, 240"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"50, 210, 55"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"130, 60, 200"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"225, 80, 80"}},s=function(){var e="IJLOSTZ"[Math.floor(Math.random()*"IJLOSTZ".length)];return f[e]};function d(){var e=Object(u.a)(["\nwidth: auto;\nbackground: rgba(",",0.8);\nborder: ",";\nborder-color: rgba(",",0.5);\n"]);return d=function(){return e},e}var p=l.a.div(d(),(function(e){return e.background}),(function(e){return 0===e.type?"0px solid":"4px solid"}),(function(e){return e.background})),b=a.a.memo((function(e){var n=e.type;return a.a.createElement(p,{type:n,background:f[n].color})}));function v(){var e=Object(u.a)(["\ndisplay: grid;\ngrid-template-rows: repeat(",",calc(25vw / ","));\ngrid-template-columns: repeat(",",1fr);\ngrid-gap: 1px;\nborder: 2px solid #333;\nwidth: 100%;\nmax-width: 25vw;\nbackground: #111;\n"]);return v=function(){return e},e}var h=l.a.div(v(),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.width})),m=function(e){var n=e.stage;return a.a.createElement(h,{width:n[0].length,height:n.length},n.map((function(e){return e.map((function(e,n){return a.a.createElement(b,{key:n,type:e[0]})}))})))};function x(){var e=Object(u.a)(["\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    margin: 0 0 20px 0;\n    padding: 20px;\n    border: 4px solid #333;\n    min-height: 30px;\n    width: 100%;\n    border-radius: 20px;\n    color: ",";\n    background: #000;\n    font-size: 0.8rem;\n\n\n"]);return x=function(){return e},e}var g=l.a.div(x(),(function(e){return e.gameOver?"red":"#999"})),O=function(e){var n=e.gameOver,t=e.text;return a.a.createElement(g,{gameOver:n},t)};function y(){var e=Object(u.a)(["\n  box-sizing: border-box;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  border: none;\n  color: white;\n  background: #333;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n"]);return y=function(){return e},e}var j=l.a.button(y()),w=function(e){var n=e.text,t=e.handleClick;return a.a.createElement(j,{onClick:function(){return t()}},n)},E=function(){return Array.from(Array(20),(function(){return new Array(12).fill([0,"clear"])}))},k=function(e,n,t){for(var r=t.x,a=t.y,c=0;c<e.slice.length;c++)for(var o=0;o<e.slice[c].length;o++)if(0!==e.slice[c][o]&&(!n[c+e.pos.y+a]||!n[c+e.pos.y+a][o+e.pos.x+r]||"clear"!==n[c+e.pos.y+a][o+e.pos.x+r][1]))return!0},S=function(e,n){var t=Object(r.useRef)();Object(r.useEffect)((function(){t.current=e}),[e]),Object(r.useEffect)((function(){if(null!==n){var e=setInterval((function(){t.current()}),n);return function(){return clearInterval(e)}}}),[n])},I=t(6),J=function(){var e=Object(r.useState)({pos:{x:0,y:0},slice:f[0].shape,collide:!1}),n=Object(i.a)(e,2),t=n[0],a=n[1],c=function(e,n){var t=e.map((function(n,t){return e.map((function(e){return e[t]}))}));return n>0?t.map((function(e){return e.reverse()})):t.reverse()},o=Object(r.useCallback)((function(e){var n=e.x,t=e.y,r=e.collide;a((function(e){return Object(I.a)(Object(I.a)({},e),{},{pos:{x:e.pos.x+=n/2,y:e.pos.y+=t/2},collide:r})}))})),u=Object(r.useCallback)((function(){a({pos:{x:4,y:0},slice:s().shape,collide:!1})}));return[t,o,u,function(e,n){var r=JSON.parse(JSON.stringify(t));r.slice=c(r.slice,n);for(var o=r.pos.x,i=1;k(r,e,{x:0,y:0});)if(r.pos.x+=i,(i=-(i+(i>0?1:-1)))>r.slice[0].length)return c(r.slice,-n),void(r.pos.x=o);a(r)}]},C=function(e,n){var t=Object(r.useState)(E()),a=Object(i.a)(t,2),c=a[0],o=a[1],u=Object(r.useState)(0),l=Object(i.a)(u,2),f=l[0],s=l[1];return Object(r.useEffect)((function(){var t=function(t){var r,a=t.map((function(e){return e.map((function(e){return"clear"===e[1]?[0,"clear"]:e}))}));return e.slice.forEach((function(n,t){n.forEach((function(n,r){0!==n&&(a[t+e.pos.y][r+e.pos.x]=[n,"".concat(e.collide?"merge":"clear")])}))})),e.collide?(n(),(r=a).reduce((function(e,n){return s(0),-1===n.findIndex((function(e){return 0===e[0]}))?(s((function(e){return e+1})),e.unshift(new Array(r[0].length).fill([0,"clear"])),e):(e.push(n),e)}),[])):a};o((function(e){return t(e)}))}),[e]),[c,o,f]},L=function(e){var n=Object(r.useState)(0),t=Object(i.a)(n,2),a=t[0],c=t[1],o=Object(r.useState)(0),u=Object(i.a)(o,2),l=u[0],f=u[1],s=Object(r.useState)(0),d=Object(i.a)(s,2),p=d[0],b=d[1],v=[40,100,300,1200],h=Object(r.useCallback)((function(){e>0&&(c((function(n){return n+v[e-1]*(p+1)})),f((function(n){return n+e})))}),[p,v,e]);return Object(r.useEffect)((function(){h()}),[e]),[a,c,l,f,p,b]};function T(){var e=Object(u.a)(["\n  width: 100%;\n  max-width: 200px;\n  display: block;\n  padding: 0px 20px;\n"]);return T=function(){return e},e}function Z(){var e=Object(u.a)(["\n  display: flex;\n  align-items: flex-start;\n  padding: 40px;\n  margin: 0 auto;\n  max-width: 900px;\n"]);return Z=function(){return e},e}function z(){var e=Object(u.a)(["\n  width: 100vw;\n  height: 100vh;\n  background: #111;\n  overflow: hidden;\n"]);return z=function(){return e},e}var A=l.a.div(z()),M=l.a.div(Z()),R=l.a.div(T()),B=function(){var e=J(),n=Object(i.a)(e,4),t=n[0],c=n[1],o=n[2],u=n[3],l=C(t,o),f=Object(i.a)(l,3),s=f[0],d=f[1],p=f[2],b=L(p),v=Object(i.a)(b,6),h=v[0],x=v[1],g=v[2],y=v[3],j=v[4],I=v[5],T=Object(r.useState)(null),Z=Object(i.a)(T,2),z=Z[0],B=Z[1],K=Object(r.useState)(!1),N=Object(i.a)(K,2),W=N[0],D=N[1],G=function(){d(E()),B(1e3),o(),D(!1),x(0),y(0),I(0)},U=function(){g>10*(j+1)&&(I((function(e){return e+1})),B(1e3/(j+1)+200)),k(t,s,{x:0,y:1})?(t.pos.y<1&&(D(!0),B(null)),c({x:0,y:0,collide:!0})):c({x:0,y:1,collide:!1})},$=function(e){k(t,s,{x:e,y:0})||c({x:e,y:0})},q=function(e){var n=e.keyCode;if(!W)switch(n){case 37:$(-1);break;case 38:u(s,1);break;case 39:$(1);break;case 40:B(null),U()}};return S((function(){U()}),z),a.a.createElement(A,{role:"button",tabIndex:"0",onKeyDown:function(e){return q(e)},onKeyUp:function(e){var n=e.keyCode;W||40===n&&B(1e3)}},a.a.createElement(M,null,a.a.createElement(m,{stage:s}),a.a.createElement("div",null,a.a.createElement(R,null,W?a.a.createElement("div",null,a.a.createElement(O,{gameOver:W,text:"Game Over"}),a.a.createElement(w,{handleClick:G,text:"Restart"})):a.a.createElement("div",null,a.a.createElement(O,{text:"Score: ".concat(h)}),a.a.createElement(O,{text:"Rows: ".concat(g)}),a.a.createElement(O,{text:"Level: ".concat(j)}),a.a.createElement(w,{handleClick:G,text:"Start"}))))))},K=function(){return a.a.createElement("div",null,a.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.a09be0f8.chunk.js.map